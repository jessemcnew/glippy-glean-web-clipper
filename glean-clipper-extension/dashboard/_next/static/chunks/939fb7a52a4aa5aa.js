(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76828,e=>{"use strict";e.s(["Search",()=>t],76828);let t=(0,e.i(88935).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},85248,e=>{"use strict";async function t(){try{try{let e=localStorage.getItem("glean_clips");if(!e)return a();let t=JSON.parse(e);if(0===t.length)return a();return t.map(e=>{var t;return{id:e.id||Date.now()+Math.random(),type:e.type||(e.selectedText?"text":"image"),url:e.url||"",title:e.title||"Untitled Clip",date:(t=e.timestamp||e.date||Date.now(),new Date(t).toISOString().split("T")[0]),source:e.domain||e.source||"",selectedText:e.selectedText,domain:e.domain,timestamp:e.timestamp||new Date(e.date||Date.now()).getTime(),syncStatus:e.syncStatus||(e.synced?"synced":"pending"),collectionId:e.collectionId||e.gleanCollectionId,collectionName:e.collectionName}})}catch(e){return console.error("Failed to parse clips from localStorage:",e),a()}}catch(e){return console.error("Failed to fetch clips:",e),[]}}function a(){return[{id:"mock-1",type:"text",url:"https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering",title:"Prompt Engineering Guide - Anthropic",date:"2024-12-10",source:"docs.anthropic.com",selectedText:"Claude performs best with clear, specific instructions. Break complex tasks into steps and provide examples of desired output format.",domain:"docs.anthropic.com",timestamp:Date.now()-864e5,syncStatus:"synced",collectionName:"AI Resources"},{id:"mock-2",type:"text",url:"https://react.dev/learn/thinking-in-react",title:"Thinking in React",date:"2024-12-09",source:"react.dev",selectedText:"React changes how you think about designs and apps. When you build a UI with React, you first break it apart into pieces called components.",domain:"react.dev",timestamp:Date.now()-1728e5,syncStatus:"synced",collectionName:"Dev Docs"},{id:"mock-3",type:"text",url:"https://www.glean.com/blog/enterprise-search",title:"The Future of Enterprise Search",date:"2024-12-08",source:"glean.com",selectedText:"Enterprise search has evolved beyond keyword matching. Modern solutions use AI to understand context, user intent, and organizational knowledge graphs.",domain:"glean.com",timestamp:Date.now()-2592e5,syncStatus:"pending",collectionName:void 0},{id:"mock-4",type:"text",url:"https://tailwindcss.com/docs/customizing-colors",title:"Customizing Colors - Tailwind CSS",date:"2024-12-07",source:"tailwindcss.com",selectedText:"Tailwind includes an expertly-crafted default color palette out-of-the-box that is a great starting point.",domain:"tailwindcss.com",timestamp:Date.now()-3456e5,syncStatus:"synced",collectionName:"CSS"},{id:"mock-5",type:"text",url:"https://developer.chrome.com/docs/extensions",title:"Chrome Extensions Documentation",date:"2024-12-06",source:"developer.chrome.com",selectedText:"Extensions are small software programs that customize the browsing experience. They let users tailor Chrome functionality to individual needs.",domain:"developer.chrome.com",timestamp:Date.now()-432e6,syncStatus:"synced",collectionName:"Extension Dev"}]}async function s(e){try{var t=e;try{let e=localStorage.getItem("glean_clips");if(!e)return!1;let a=JSON.parse(e).filter(e=>String(e.id)!==String(t));return localStorage.setItem("glean_clips",JSON.stringify(a)),!0}catch(e){return console.error("Failed to delete clip from localStorage:",e),!1}}catch(e){return console.error("Failed to delete clip:",e),!1}}function r(e){if(e.url)window.open(e.url,"_blank");else if(e.selectedText){let t=new Blob([e.selectedText],{type:"text/plain"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="".concat(e.title||"clip",".txt"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)}}e.s(["deleteClip",()=>s,"downloadClip",()=>r,"fetchClips",()=>t])},71253,e=>{"use strict";e.s(["ExternalLink",()=>t],71253);let t=(0,e.i(88935).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},1237,83782,16367,74542,e=>{"use strict";e.s(["default",()=>v],1237);var t=e.i(35197),a=e.i(58213),s=e.i(32192),r=e.i(83959);e.s(["Input",()=>n],83782);var i=e.i(50526);let n=a.forwardRef((e,a)=>{let{className:s,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...n})});n.displayName="Input",e.i(94318);var c=e.i(33863),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let r=(0,c.createSlot)("Primitive.".concat(s)),i=a.forwardRef((e,a)=>{let{asChild:i,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(i?r:s,{...n,ref:a})});return i.displayName="Primitive.".concat(s),{...e,[s]:i}},{}),o=a.forwardRef((e,a)=>(0,t.jsx)(l.label,{...e,ref:a,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";let d=(0,e.i(62445).cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=a.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(o,{ref:a,className:(0,i.cn)(d(),s),...r})});m.displayName=o.displayName,e.s(["Card",()=>h,"CardContent",()=>g,"CardDescription",()=>p,"CardHeader",()=>x,"CardTitle",()=>u],16367);let h=a.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});h.displayName="Card";let x=a.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...r})});x.displayName="CardHeader";let u=a.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("h3",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});u.displayName="CardTitle";let p=a.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});p.displayName="CardDescription";let g=a.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,i.cn)("p-6 pt-0",s),...r})});g.displayName="CardContent",a.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter",e.s(["Loader2",()=>f],74542);let f=(0,e.i(88935).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var b=e.i(95604);function v(){let{login:e}=(0,s.useAuth)(),[i,c]=(0,a.useState)("app.glean.com"),[l,o]=(0,a.useState)(""),[d,x]=(0,a.useState)("manual"),[u,p]=(0,a.useState)(""),[g,v]=(0,a.useState)(!1),[k,y]=(0,a.useState)(!0),[j,z]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(0,b.checkExtensionAvailable)().then(t=>{z(t),t&&(0,b.getOAuthTokenFromExtension)().then(t=>{t.success&&t.token&&e({domain:t.domain||i.trim(),apiToken:t.token,authMethod:"oauth"})}).catch(()=>{})}).catch(()=>{})},[i,e]),(0,a.useEffect)(()=>{let t=window.location.hash,a=new URLSearchParams(window.location.search),s=new URLSearchParams(t.substring(1)).get("access_token")||a.get("token");s&&(e({domain:i.trim(),apiToken:s,authMethod:"oauth"}),window.history.replaceState({},document.title,window.location.pathname))},[i,e]);let C=async t=>{if(t.preventDefault(),p(""),v(!0),!i||!l){p("Please enter both domain and API token"),v(!1);return}try{let t={domain:i.trim(),apiToken:l.trim(),authMethod:d};e(t)}catch(e){p(e instanceof Error?e.message:"Failed to save authentication")}finally{v(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:[(0,t.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute top-1/4 -left-48 w-96 h-96 bg-accent/5 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"absolute bottom-1/4 -right-48 w-96 h-96 bg-primary/5 rounded-full blur-3xl"})]}),(0,t.jsxs)("div",{className:"w-full max-w-md relative z-10",children:[(0,t.jsxs)("header",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-primary/10 rounded-lg mb-4",role:"img","aria-label":"Glean logo",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-6 h-6 text-primary","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),(0,t.jsx)("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),(0,t.jsx)("path",{d:"M12 6v6"}),(0,t.jsx)("path",{d:"M9 9h6"})]})}),(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight text-balance",children:"Welcome to Glean"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-pretty",children:"Sign in to access your dashboard and insights"})]}),(0,t.jsxs)(h,{className:"p-6 border-border/50 bg-card/50 backdrop-blur-xl shadow-lg",children:[k?(0,t.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[j&&(0,t.jsxs)("button",{type:"button",onClick:()=>{y(!1),p(""),o("")},className:"flex items-center text-sm text-muted-foreground hover:text-foreground transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded","aria-label":"Back to sign in options",children:[(0,t.jsx)("svg",{className:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,t.jsx)("span",{children:"Back to sign in options"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m,{htmlFor:"domain",className:"text-sm font-medium",children:"Glean Domain"}),(0,t.jsx)(n,{id:"domain",type:"text",value:i,onChange:e=>c(e.target.value),placeholder:"app.glean.com",disabled:g,className:"h-11 bg-background border-border/50",required:!0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-pretty",children:"Your Glean instance domain (e.g., app.glean.com or yourcompany.glean.com)"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m,{htmlFor:"token",className:"text-sm font-medium",children:"API Token"}),(0,t.jsx)(n,{id:"token",type:"password",placeholder:"glean_••••••••••••••••",value:l,onChange:e=>{o(e.target.value),p("")},disabled:g,className:"h-11 bg-background border-border/50",autoFocus:!0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-pretty",children:"Enter your API token to authenticate with Glean"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m,{className:"text-sm font-medium",children:"Authentication Method"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:"authMethod",value:"manual",checked:"manual"===d,onChange:()=>x("manual"),className:"mr-2 accent-primary"}),(0,t.jsx)("span",{className:"text-sm",children:"Manual Token (Glean-issued)"})]}),(0,t.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:"authMethod",value:"oauth",checked:"oauth"===d,onChange:()=>x("oauth"),className:"mr-2 accent-primary"}),(0,t.jsx)("span",{className:"text-sm",children:"OAuth Token"})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-pretty",children:"Select OAuth if your token was obtained via OAuth flow"})]}),(0,t.jsx)(r.Button,{type:"submit",disabled:g||!l.trim(),className:"w-full h-11 text-base font-medium",size:"lg","aria-label":g?"Verifying credentials":"Continue with API token",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{className:"mr-2 h-4 w-4 animate-spin","aria-hidden":"true"}),(0,t.jsx)("span",{children:"Verifying..."})]}):(0,t.jsx)("span",{children:"Continue"})})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(r.Button,{onClick:()=>{v(!0),p("");try{let t=i.trim().replace(/^https?:\/\//,"").replace(/\/$/,"");t.includes("-be.glean.com")||"app.glean.com"===t||t.startsWith("app.")||t.endsWith(".glean.com")&&t.replace(".glean.com","");let a=t.includes("-be.")?t.replace("-be.glean.com",".glean.com"):t,s="".concat(window.location.origin,"/auth/callback"),r="https://".concat(a,"/oauth/authorize?")+"redirect_uri=".concat(encodeURIComponent(s),"&")+"scope=".concat(encodeURIComponent("collections:read drafts:read users:read groups:read integrations:read"),"&")+"response_type=code";sessionStorage.setItem("oauth_domain",t),console.log("Opening OAuth flow in popup:",r);let n=window.open(r,"glean-oauth","width=600,height=700,scrollbars=yes,resizable=yes");if(!n){p("Popup blocked. Please allow popups for this site and try again."),v(!1);return}let c=!1,l=async a=>{if(a.origin!==window.location.origin)return void console.warn("Ignored message from unauthorized origin:",a.origin);if("GLEAN_OAUTH_SUCCESS"===a.data.type){c=!0,window.removeEventListener("message",l),null==n||n.close();let{token:s,domain:r}=a.data;e({domain:r||t,apiToken:s,authMethod:"oauth"}),v(!1)}else"GLEAN_OAUTH_ERROR"===a.data.type&&(c=!0,window.removeEventListener("message",l),null==n||n.close(),p(a.data.error||"OAuth authentication failed"),v(!1))};window.addEventListener("message",l);let o=setInterval(()=>{(null==n?void 0:n.closed)&&!c&&(clearInterval(o),window.removeEventListener("message",l),p("OAuth flow was cancelled"),v(!1))},1e3)}catch(e){p(e instanceof Error?e.message:"Failed to initiate OAuth flow"),v(!1)}},disabled:g||N,className:"w-full h-11 text-base font-medium",size:"lg","aria-label":N?"Checking extension":g?"Connecting":j?"Sign in with Extension OAuth":"Continue with OAuth",children:N?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{className:"mr-2 h-4 w-4 animate-spin","aria-hidden":"true"}),(0,t.jsx)("span",{children:"Checking extension..."})]}):g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{className:"mr-2 h-4 w-4 animate-spin","aria-hidden":"true"}),(0,t.jsx)("span",{children:"Connecting..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"mr-2 h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),(0,t.jsx)("span",{children:j?"Sign in with Extension OAuth":"Continue with OAuth"})]})}),j&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Using OAuth token from Glean Web Clipper extension"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-border"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,t.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"Or"})})]}),(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>y(!0),className:"w-full h-11 text-base font-medium border-border/50",size:"lg",children:"Sign in with API token"})]}),u&&(0,t.jsx)("div",{className:"mt-4 p-3 rounded-lg bg-destructive/10 border border-destructive/20",role:"alert","aria-live":"assertive",children:(0,t.jsx)("p",{className:"text-sm text-destructive text-pretty",children:u})})]}),(0,t.jsxs)("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:[(0,t.jsxs)("p",{className:"text-pretty",children:["Don't have an account?"," ",(0,t.jsx)("a",{href:"#",className:"text-foreground hover:underline font-medium",children:"Contact your administrator"})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-4",children:[(0,t.jsx)("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Privacy"}),(0,t.jsx)("span",{className:"text-border",children:"·"}),(0,t.jsx)("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Terms"}),(0,t.jsx)("span",{className:"text-border",children:"·"}),(0,t.jsx)("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Help"})]})]})]})]})}},62515,e=>{"use strict";e.s(["Home",()=>t],62515);let t=(0,e.i(88935).default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},70767,e=>{"use strict";e.s(["Plus",()=>t],70767);let t=(0,e.i(88935).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},93619,e=>{"use strict";e.s(["Settings",()=>t],93619);let t=(0,e.i(88935).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},26837,e=>{"use strict";e.s(["Clock",()=>t],26837);let t=(0,e.i(88935).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},50261,e=>{"use strict";e.s(["ChevronRight",()=>t],50261);let t=(0,e.i(88935).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},22654,e=>{"use strict";e.s(["Command",()=>t],22654);let t=(0,e.i(88935).default)("command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]])},36382,e=>{"use strict";e.s(["default",()=>O],36382);var t=e.i(35197),a=e.i(58213),s=e.i(32192),r=e.i(1237);class i{async search(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{filters:a=[],limit:s=10,offset:r=0}=t;return this.config.baseUrl.includes("/mcp")?this.searchViaMCP(e,t):this.searchViaDirect(e,t)}async searchViaMCP(e,t){try{let a={"Content-Type":"application/json",Accept:"application/json"};this.config.apiKey&&(a.Authorization="Bearer ".concat(this.config.apiKey),"oauth"===this.config.authMethod&&(a["X-Glean-Auth-Type"]="OAUTH"));let s=await fetch("".concat(this.config.baseUrl),{method:"POST",headers:a,body:JSON.stringify({method:"search",params:{query:e,...t}})});if(!s.ok)throw Error("Search failed: ".concat(s.statusText));let r=await s.json();return this.normalizeResults(r)}catch(e){throw console.error("MCP search failed:",e),e}}async searchViaDirect(e,t){try{var a,s;let r=new URLSearchParams({query:e,pageSize:(null==(a=t.limit)?void 0:a.toString())||"10",pageToken:(null==(s=t.offset)?void 0:s.toString())||"0"}),i={"Content-Type":"application/json",Accept:"application/json"};this.config.apiKey&&(i.Authorization="Bearer ".concat(this.config.apiKey),"oauth"===this.config.authMethod&&(i["X-Glean-Auth-Type"]="OAUTH"));let n=await fetch("".concat(this.config.baseUrl,"/api/index/v1/search?").concat(r),{method:"GET",headers:i});if(!n.ok)throw Error("Search failed: ".concat(n.statusText));let c=await n.json();return this.normalizeResults(c)}catch(e){throw console.error("Direct API search failed:",e),e}}normalizeResults(e){let t=(e.results||e.items||[]).map(e=>({id:e.id||e.documentId,title:e.title,snippet:e.snippet||e.summary||"",url:e.url||e.viewUrl,documentType:e.documentType||e.type||"document",author:e.author?{name:e.author.name||e.author.displayName,email:e.author.email}:void 0,createdAt:e.createdAt||e.createTime,updatedAt:e.updatedAt||e.updateTime,score:e.score||e.relevanceScore||0}));return{results:t,facets:e.facets||[],query:e.query||"",total:e.total||e.totalCount||t.length}}constructor(e){!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"config",void 0),this.config=e}}var n=e.i(85248),c=e.i(76828),l=e.i(62515),o=e.i(88935);let d=(0,o.default)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),m=(0,o.default)("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),h=(0,o.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var x=e.i(70767);let u=(0,o.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var p=e.i(93619);let g=(0,o.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var f=e.i(74542),b=e.i(26837),v=e.i(50261),k=e.i(22654);let y=(0,o.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),j=(0,o.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),z=(0,o.default)("scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);var N=e.i(71253),w=e.i(16367),C=e.i(83959),S=e.i(83782),T=e.i(50526);let A=(0,o.default)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),M=(0,o.default)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]);var D=e.i(43387);function R(){let{theme:e,resolvedTheme:a,setTheme:s}=(0,D.useTheme)();return(0,t.jsxs)("button",{onClick:()=>{"dark"===e?s("light"):"light"===e?s("system"):s("dark")},className:(0,T.cn)("relative flex items-center gap-2 px-3 py-1.5 rounded-full","bg-zinc-100 dark:bg-zinc-800","border border-zinc-200 dark:border-zinc-700","text-zinc-700 dark:text-zinc-300","hover:bg-zinc-200 dark:hover:bg-zinc-700","transition-all duration-200 ease-in-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","focus-visible:ring-offset-zinc-50 dark:focus-visible:ring-offset-zinc-950"),"aria-label":"Switch to ".concat("dark"===e?"light":"light"===e?"system":"dark"," theme"),title:"Current: ".concat("system"===e?"System (".concat(a,")"):e),children:[(0,t.jsx)(A,{className:(0,T.cn)("h-4 w-4 transition-all duration-200","light"===a?"opacity-100 scale-100":"opacity-40 scale-90")}),(0,t.jsx)(M,{className:(0,T.cn)("h-4 w-4 transition-all duration-200","dark"===a?"opacity-100 scale-100":"opacity-40 scale-90")})]})}function E(e){let{searchQuery:s,setSearchQuery:r,searchResults:i,isSearching:n,searchError:o,recentClips:A,isLoadingClips:M,savedSearches:D,onSearch:E,onExecuteSavedSearch:O,stats:P,config:L,onLogout:I}=e,[U,H]=(0,a.useState)("dashboard");return(0,t.jsxs)("div",{className:"flex h-screen bg-zinc-50 dark:bg-zinc-950 text-zinc-900 dark:text-zinc-100",children:[(0,t.jsxs)("aside",{className:"w-80 border-r border-zinc-200 dark:border-zinc-800 bg-zinc-100 dark:bg-zinc-900 flex flex-col",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-zinc-200 dark:border-zinc-800",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:"Glean Dashboard"}),(0,t.jsx)(R,{})]}),(0,t.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:[L.domain," ","oauth"===L.authMethod&&"(OAuth)"]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-auto px-4 py-6",children:[(0,t.jsxs)("nav",{className:"space-y-1 mb-8",children:[(0,t.jsx)("h2",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider mb-3 px-3",children:"Navigation"}),(0,t.jsxs)("button",{onClick:()=>H("dashboard"),className:(0,T.cn)("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors","dashboard"===U?"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100":"text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 hover:bg-zinc-200/50 dark:hover:bg-zinc-800/50"),children:[(0,t.jsx)(l.Home,{className:"h-4 w-4"}),"Dashboard"]}),(0,t.jsxs)("a",{href:"./clips/",className:(0,T.cn)("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors","text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 hover:bg-zinc-200/50 dark:hover:bg-zinc-800/50"),children:[(0,t.jsx)(d,{className:"h-4 w-4"}),"Clips"]}),(0,t.jsxs)("a",{href:"./library/",className:(0,T.cn)("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors","text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 hover:bg-zinc-200/50 dark:hover:bg-zinc-800/50"),children:[(0,t.jsx)(m,{className:"h-4 w-4"}),"Library"]}),(0,t.jsxs)("button",{onClick:()=>H("collections"),className:(0,T.cn)("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors","collections"===U?"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100":"text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 hover:bg-zinc-200/50 dark:hover:bg-zinc-800/50"),children:[(0,t.jsx)(h,{className:"h-4 w-4"}),"Collections"]})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider mb-3 px-3",children:"Quick Actions"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(C.Button,{variant:"outline",size:"sm",className:"w-full justify-start bg-zinc-200 dark:bg-zinc-800 border-zinc-300 dark:border-zinc-700 text-zinc-900 dark:text-zinc-100 hover:bg-zinc-300 dark:hover:bg-zinc-700 hover:text-zinc-900 dark:hover:text-zinc-100",children:[(0,t.jsx)(x.Plus,{className:"h-4 w-4 mr-2"}),"New Clip"]}),(0,t.jsxs)(C.Button,{variant:"outline",size:"sm",className:"w-full justify-start bg-zinc-200 dark:bg-zinc-800 border-zinc-300 dark:border-zinc-700 text-zinc-900 dark:text-zinc-100 hover:bg-zinc-300 dark:hover:bg-zinc-700 hover:text-zinc-900 dark:hover:text-zinc-100",children:[(0,t.jsx)(u,{className:"h-4 w-4 mr-2"}),"Import Data"]})]})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider mb-3 px-3",children:"Stats"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"px-3 py-2 rounded-lg bg-zinc-200/50 dark:bg-zinc-800/50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Total Clips"}),(0,t.jsx)("span",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:P.totalClips})]})}),(0,t.jsx)("div",{className:"px-3 py-2 rounded-lg bg-zinc-200/50 dark:bg-zinc-800/50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Synced"}),(0,t.jsx)("span",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:P.syncedCount})]})}),(0,t.jsx)("div",{className:"px-3 py-2 rounded-lg bg-zinc-200/50 dark:bg-zinc-800/50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Collections"}),(0,t.jsx)("span",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:P.collectionsCount})]})})]})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h2",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider mb-3 px-3",children:"Saved Searches"}),(0,t.jsx)("div",{className:"space-y-1",children:D.length>0?D.map(e=>(0,t.jsxs)("div",{className:"w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm text-zinc-500 dark:text-zinc-500 opacity-50 cursor-not-allowed",title:"Glean API key required",children:[(0,t.jsx)("span",{className:"truncate",children:e.name}),(0,t.jsx)(v.ChevronRight,{className:"h-4 w-4 opacity-50 flex-shrink-0"})]},e.id)):(0,t.jsx)("p",{className:"px-3 py-2 text-sm text-zinc-500 dark:text-zinc-500",children:"No saved searches"})})]})]}),(0,t.jsxs)("div",{className:"p-4 border-t border-zinc-200 dark:border-zinc-800",children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider mb-3",children:"Keyboard Shortcuts"}),(0,t.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-zinc-600 dark:text-zinc-400",children:[(0,t.jsx)("span",{children:"Search"}),(0,t.jsxs)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-800 rounded border border-zinc-300 dark:border-zinc-700 text-zinc-700 dark:text-zinc-300",children:[(0,t.jsx)(k.Command,{className:"h-3 w-3 inline mr-1"}),"K"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-zinc-600 dark:text-zinc-400",children:[(0,t.jsx)("span",{children:"New Clip"}),(0,t.jsxs)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-800 rounded border border-zinc-300 dark:border-zinc-700 text-zinc-700 dark:text-zinc-300",children:[(0,t.jsx)(k.Command,{className:"h-3 w-3 inline mr-1"}),"N"]})]})]}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-zinc-200 dark:border-zinc-800 space-y-2",children:[(0,t.jsxs)(C.Button,{variant:"ghost",size:"sm",className:"w-full justify-start text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 hover:bg-zinc-200 dark:hover:bg-zinc-800",children:[(0,t.jsx)(p.Settings,{className:"h-4 w-4 mr-2"}),"Settings"]}),(0,t.jsxs)(C.Button,{variant:"ghost",size:"sm",onClick:I,className:"w-full justify-start text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 hover:bg-zinc-200 dark:hover:bg-zinc-800",children:[(0,t.jsx)(g,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]}),(0,t.jsxs)("main",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)("div",{className:"p-6 border-b border-zinc-200 dark:border-zinc-800 bg-zinc-100 dark:bg-zinc-900",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.trim()&&E(s)},className:"max-w-3xl",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(c.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-zinc-500 dark:text-zinc-400"}),(0,t.jsx)(S.Input,{type:"text",placeholder:"Search Glean knowledge base...",value:s,onChange:e=>r(e.target.value),className:"pl-10 pr-4 py-6 bg-zinc-50 dark:bg-zinc-800 border-zinc-300 dark:border-zinc-700 text-zinc-900 dark:text-zinc-100 placeholder:text-zinc-500 dark:placeholder:text-zinc-500 focus:ring-2 focus:ring-zinc-400 dark:focus:ring-zinc-600 focus:border-transparent text-base"}),n&&(0,t.jsx)(f.Loader2,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-zinc-500 dark:text-zinc-400 animate-spin"})]}),o&&(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-red-600 dark:text-red-400",children:[(0,t.jsx)(y,{className:"h-4 w-4"}),o]})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-auto p-6",children:n&&0===i.length?(0,t.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 rounded-lg shadow-sm border border-zinc-200 dark:border-zinc-800 p-12 text-center",role:"status","aria-live":"polite",children:[(0,t.jsx)(f.Loader2,{className:"w-12 h-12 text-zinc-500 dark:text-zinc-400 mx-auto mb-4 animate-spin","aria-hidden":"true"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-zinc-900 dark:text-zinc-100 mb-2",children:"Searching..."}),(0,t.jsxs)("p",{className:"text-zinc-600 dark:text-zinc-400",children:['Finding results for "',s,'"']})]}):i.length>0?(0,t.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-900 rounded-lg shadow-sm border border-zinc-200 dark:border-zinc-800",children:[(0,t.jsx)("div",{className:"p-4 border-b border-zinc-200 dark:border-zinc-800",children:(0,t.jsxs)("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:["Search Results (",i.length,")"]})}),(0,t.jsx)("div",{className:"divide-y divide-zinc-200 dark:divide-zinc-800",role:"list",children:i.map(e=>(0,t.jsx)("article",{className:"p-6 hover:bg-zinc-200 dark:hover:bg-zinc-800 focus-within:bg-zinc-200 dark:focus-within:bg-zinc-800",role:"listitem",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-4 h-4 flex-shrink-0 mt-1",role:"img","aria-label":"".concat(e.type," type icon"),children:(e=>{let a="w-4 h-4";switch(e){case"document":return(0,t.jsx)("div",{className:"".concat(a," bg-blue-500 rounded"),"aria-hidden":"true"});case"person":return(0,t.jsx)("div",{className:"".concat(a," bg-green-500 rounded-full"),"aria-hidden":"true"});case"app":return(0,t.jsx)("div",{className:"".concat(a," bg-purple-500 rounded"),"aria-hidden":"true"});case"discussion":return(0,t.jsx)("div",{className:"".concat(a," bg-orange-500 rounded"),"aria-hidden":"true"});default:return(0,t.jsx)("div",{className:"".concat(a," bg-zinc-500 rounded"),"aria-hidden":"true"})}})(e.type)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-zinc-900 dark:text-zinc-100 hover:text-blue-600 dark:hover:text-blue-400 mb-2",children:(0,t.jsx)("a",{href:e.url,className:"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 focus-visible:ring-offset-zinc-50 dark:focus-visible:ring-offset-zinc-900 rounded","aria-label":"".concat(e.title,", ").concat(e.type,", ").concat(e.relevanceScore,"% match"),children:e.title})}),(0,t.jsx)("p",{className:"text-zinc-700 dark:text-zinc-300 mb-3 leading-relaxed",children:e.snippet}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-zinc-600 dark:text-zinc-400",role:"group","aria-label":"Result metadata",children:[e.author&&(0,t.jsxs)("span",{"aria-label":"Author: ".concat(e.author),children:["By ",e.author]}),e.date&&(0,t.jsx)("time",{dateTime:e.date.toISOString(),"aria-label":"Date: ".concat(e.date.toLocaleDateString()),children:e.date.toLocaleDateString()}),(0,t.jsx)("span",{className:"capitalize","aria-label":"Type: ".concat(e.type),children:e.type}),(0,t.jsxs)("span",{className:"text-blue-600 dark:text-blue-400 font-medium","aria-label":"Relevance: ".concat(e.relevanceScore,"% match"),children:[e.relevanceScore,"% match"]})]})]})]})},e.id))})]}):(0,t.jsxs)("div",{className:"max-w-7xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("h2",{className:"text-2xl font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[(0,t.jsx)(z,{className:"w-5 h-5","aria-hidden":"true"}),"Recent Clips"]}),(0,t.jsxs)("a",{href:"./library/",className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 focus-visible:ring-offset-zinc-50 dark:focus-visible:ring-offset-zinc-950 rounded flex items-center gap-1",children:["View all",(0,t.jsx)(v.ChevronRight,{className:"w-4 h-4"})]})]}),M?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(f.Loader2,{className:"h-8 w-8 text-zinc-500 dark:text-zinc-400 animate-spin"})}):A.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map(e=>(0,t.jsxs)(w.Card,{className:"bg-zinc-100 dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-700 transition-colors cursor-pointer group",children:[(0,t.jsxs)(w.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsx)(w.CardTitle,{className:"text-base text-zinc-900 dark:text-zinc-100 line-clamp-2 group-hover:text-zinc-950 dark:group-hover:text-white transition-colors flex-1",children:e.title}),e.url&&(0,t.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-zinc-600 dark:text-zinc-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors flex-shrink-0 ml-2","aria-label":"Open ".concat(e.title," in new tab"),onClick:e=>e.stopPropagation(),children:(0,t.jsx)(N.ExternalLink,{className:"w-4 h-4"})})]}),e.selectedText&&(0,t.jsx)(w.CardDescription,{className:"text-sm text-zinc-600 dark:text-zinc-400 line-clamp-2",children:e.selectedText})]}),(0,t.jsxs)(w.CardContent,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-zinc-600 dark:text-zinc-500 mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Clock,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:e.date})]}),e.source&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(j,{className:"h-3 w-3 text-green-600 dark:text-green-500"}),(0,t.jsx)("span",{className:"truncate",children:e.source})]})]}),"synced"===e.syncStatus&&e.collectionName&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-500",children:[(0,t.jsx)(j,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:e.collectionName})]})]})]},e.id))}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)(z,{className:"h-12 w-12 text-zinc-400 dark:text-zinc-700 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"No clips yet"}),(0,t.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-500 mb-4",children:"Start clipping content from Glean to see it here"}),(0,t.jsxs)(C.Button,{className:"bg-zinc-200 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 hover:bg-zinc-300 dark:hover:bg-zinc-700",children:[(0,t.jsx)(x.Plus,{className:"h-4 w-4 mr-2"}),"Create Your First Clip"]})]})]})})]}),(0,t.jsxs)("aside",{className:"w-96 border-l border-zinc-200 dark:border-zinc-800 bg-zinc-100 dark:bg-zinc-900 flex flex-col",children:[(0,t.jsx)("div",{className:"p-6 border-b border-zinc-200 dark:border-zinc-800",children:(0,t.jsx)("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"Quick Actions"})}),(0,t.jsx)("div",{className:"flex-1 overflow-auto p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(w.Card,{className:"bg-zinc-200 dark:bg-zinc-800 border-zinc-300 dark:border-zinc-700",children:[(0,t.jsx)(w.CardHeader,{children:(0,t.jsx)(w.CardTitle,{className:"text-sm text-zinc-900 dark:text-zinc-100",children:"Recent Activity"})}),(0,t.jsx)(w.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 text-sm",children:[(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-600 dark:bg-green-500 mt-1.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-zinc-700 dark:text-zinc-300",children:"New clip added"}),(0,t.jsx)("p",{className:"text-zinc-600 dark:text-zinc-500 text-xs",children:"2 minutes ago"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3 text-sm",children:[(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-600 dark:bg-blue-500 mt-1.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-zinc-700 dark:text-zinc-300",children:"Collection updated"}),(0,t.jsx)("p",{className:"text-zinc-600 dark:text-zinc-500 text-xs",children:"1 hour ago"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3 text-sm",children:[(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-yellow-600 dark:bg-yellow-500 mt-1.5 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-zinc-700 dark:text-zinc-300",children:"Sync completed"}),(0,t.jsx)("p",{className:"text-zinc-600 dark:text-zinc-500 text-xs",children:"3 hours ago"})]})]})]})})]}),(0,t.jsxs)(w.Card,{className:"bg-zinc-200 dark:bg-zinc-800 border-zinc-300 dark:border-zinc-700",children:[(0,t.jsx)(w.CardHeader,{children:(0,t.jsx)(w.CardTitle,{className:"text-sm text-zinc-900 dark:text-zinc-100",children:"Trending Topics"})}),(0,t.jsx)(w.CardContent,{children:(0,t.jsx)("div",{className:"space-y-2",children:["Product Roadmap","Engineering Standards","Design System","API Documentation"].map((e,a)=>(0,t.jsxs)("button",{className:"w-full text-left px-3 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-900 hover:bg-zinc-300 dark:hover:bg-zinc-700 transition-colors",children:[(0,t.jsx)("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:e}),(0,t.jsxs)("p",{className:"text-xs text-zinc-600 dark:text-zinc-500 mt-1",children:[Math.floor(50*Math.random())+10," mentions"]})]},a))})})]})]})})]})]})}function O(){let{isAuth:e,config:c,logout:l,isLoading:o}=(0,s.useAuth)(),[d,m]=(0,a.useState)(""),[h,x]=(0,a.useState)([]),[u,p]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),[b,v]=(0,a.useState)([]),[k,y]=(0,a.useState)(!0),[j,z]=(0,a.useState)([{id:"1",name:"Product Roadmap Q4",query:"roadmap Q4 2025 product strategy",filters:["documents","presentations"],lastUsed:new Date("2025-01-15"),resultCount:23},{id:"2",name:"Engineering Team Updates",query:"engineering standup updates sprint",filters:["discussions","documents"],lastUsed:new Date("2025-01-14"),resultCount:45},{id:"3",name:"Customer Feedback Analysis",query:"customer feedback survey NPS",filters:["documents","apps"],lastUsed:new Date("2025-01-13"),resultCount:67}]);if((0,a.useEffect)(()=>{!async function(){if(!o&&e){y(!0);try{let e=(await (0,n.fetchClips)()).sort((e,t)=>{let a=e.timestamp||new Date(e.date).getTime();return(t.timestamp||new Date(t.date).getTime())-a});v(e.slice(0,5))}catch(e){console.error("Failed to load recent clips:",e),v([])}finally{y(!1)}}}()},[o,e]),o)return(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 border-2 border-muted border-t-primary rounded-full animate-spin"})});if(!e)return(0,t.jsx)(r.default,{});let N=async e=>{if(!e.trim()||!c)return void x([]);p(!0),f(null),x([]);try{let t=function(e,t,a){let s;if(e.includes("-be.glean.com"))s=e;else if("app.glean.com"===e||e.startsWith("app."))s="linkedin-be.glean.com";else if(e.endsWith(".glean.com")){let t=e.replace(".glean.com","");s="".concat(t,"-be.glean.com")}else s="".concat(e,"-be.glean.com");return new i({baseUrl:"https://".concat(s),domain:e,apiKey:t,authMethod:a})}(c.domain,c.apiToken,c.authMethod),a=(await t.search(e,{limit:20,offset:0})).results.map(e=>{var t,a;return{id:e.id,title:e.title||"Untitled",snippet:e.snippet||"",type:(null==(t=e.documentType)?void 0:t.toLowerCase())||"document",url:e.url||"#",author:null==(a=e.author)?void 0:a.name,date:e.createdAt?new Date(e.createdAt):void 0,relevanceScore:Math.round(100*e.score)}});x(a)}catch(e){console.error("Search error:",e),f(e instanceof Error?e.message:"Search failed. Please try again."),x([])}finally{p(!1)}},w={totalClips:b.length,syncedCount:b.filter(e=>"synced"===e.syncStatus).length,collectionsCount:new Set(b.filter(e=>e.collectionName).map(e=>e.collectionName)).size};return c?(0,t.jsx)(E,{searchQuery:d,setSearchQuery:m,searchResults:h,isSearching:u,searchError:g,recentClips:b,isLoadingClips:k,savedSearches:j,onSearch:N,onExecuteSavedSearch:e=>{m(e.query),N(e.query),z(t=>t.map(t=>t.id===e.id?{...t,lastUsed:new Date}:t))},stats:w,config:c,onLogout:l}):(0,t.jsx)(r.default,{})}}]);