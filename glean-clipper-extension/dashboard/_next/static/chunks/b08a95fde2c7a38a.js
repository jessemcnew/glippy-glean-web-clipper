(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1237,83782,16367,74542,e=>{"use strict";e.s(["default",()=>v],1237);var t=e.i(35197),s=e.i(58213),a=e.i(32192),n=e.i(83959);e.s(["Input",()=>r],83782);var i=e.i(50526);let r=s.forwardRef((e,s)=>{let{className:a,type:n,...r}=e;return(0,t.jsx)("input",{type:n,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...r})});r.displayName="Input",e.i(94318);var l=e.i(33863),c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let n=(0,l.createSlot)("Primitive.".concat(a)),i=s.forwardRef((e,s)=>{let{asChild:i,...r}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(i?n:a,{...r,ref:s})});return i.displayName="Primitive.".concat(a),{...e,[a]:i}},{}),o=s.forwardRef((e,s)=>(0,t.jsx)(c.label,{...e,ref:s,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";let d=(0,e.i(62445).cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),m=s.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)(o,{ref:s,className:(0,i.cn)(d(),a),...n})});m.displayName=o.displayName,e.s(["Card",()=>h,"CardContent",()=>p,"CardHeader",()=>u,"CardTitle",()=>x],16367);let h=s.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});h.displayName="Card";let u=s.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...n})});u.displayName="CardHeader";let x=s.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});x.displayName="CardTitle",s.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...n})}).displayName="CardDescription";let p=s.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",a),...n})});p.displayName="CardContent",s.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter",e.s(["Loader2",()=>g],74542);let g=(0,e.i(88935).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var f=e.i(95604);function v(){let{login:e}=(0,a.useAuth)(),[i,l]=(0,s.useState)("app.glean.com"),[c,o]=(0,s.useState)(""),[d,u]=(0,s.useState)("manual"),[x,p]=(0,s.useState)(""),[v,j]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!0),[w,N]=(0,s.useState)(!1),[k,z]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(0,f.checkExtensionAvailable)().then(t=>{N(t),t&&(0,f.getOAuthTokenFromExtension)().then(t=>{t.success&&t.token&&e({domain:t.domain||i.trim(),apiToken:t.token,authMethod:"oauth"})}).catch(()=>{})}).catch(()=>{})},[i,e]),(0,s.useEffect)(()=>{let t=window.location.hash,s=new URLSearchParams(window.location.search),a=new URLSearchParams(t.substring(1)).get("access_token")||s.get("token");a&&(e({domain:i.trim(),apiToken:a,authMethod:"oauth"}),window.history.replaceState({},document.title,window.location.pathname))},[i,e]);let C=async t=>{if(t.preventDefault(),p(""),j(!0),!i||!c){p("Please enter both domain and API token"),j(!1);return}try{let t={domain:i.trim(),apiToken:c.trim(),authMethod:d};e(t)}catch(e){p(e instanceof Error?e.message:"Failed to save authentication")}finally{j(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:[(0,t.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute top-1/4 -left-48 w-96 h-96 bg-accent/5 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"absolute bottom-1/4 -right-48 w-96 h-96 bg-primary/5 rounded-full blur-3xl"})]}),(0,t.jsxs)("div",{className:"w-full max-w-md relative z-10",children:[(0,t.jsxs)("header",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-primary/10 rounded-lg mb-4",role:"img","aria-label":"Glean logo",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-6 h-6 text-primary","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),(0,t.jsx)("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}),(0,t.jsx)("path",{d:"M12 6v6"}),(0,t.jsx)("path",{d:"M9 9h6"})]})}),(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight text-balance",children:"Welcome to Glean"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2 text-pretty",children:"Sign in to access your dashboard and insights"})]}),(0,t.jsxs)(h,{className:"p-6 border-border/50 bg-card/50 backdrop-blur-xl shadow-lg",children:[y?(0,t.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[w&&(0,t.jsxs)("button",{type:"button",onClick:()=>{b(!1),p(""),o("")},className:"flex items-center text-sm text-muted-foreground hover:text-foreground transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 rounded","aria-label":"Back to sign in options",children:[(0,t.jsx)("svg",{className:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,t.jsx)("span",{children:"Back to sign in options"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m,{htmlFor:"domain",className:"text-sm font-medium",children:"Glean Domain"}),(0,t.jsx)(r,{id:"domain",type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"app.glean.com",disabled:v,className:"h-11 bg-background border-border/50",required:!0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-pretty",children:"Your Glean instance domain (e.g., app.glean.com or yourcompany.glean.com)"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m,{htmlFor:"token",className:"text-sm font-medium",children:"API Token"}),(0,t.jsx)(r,{id:"token",type:"password",placeholder:"glean_â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:c,onChange:e=>{o(e.target.value),p("")},disabled:v,className:"h-11 bg-background border-border/50",autoFocus:!0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-pretty",children:"Enter your API token to authenticate with Glean"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m,{className:"text-sm font-medium",children:"Authentication Method"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:"authMethod",value:"manual",checked:"manual"===d,onChange:()=>u("manual"),className:"mr-2 accent-primary"}),(0,t.jsx)("span",{className:"text-sm",children:"Manual Token (Glean-issued)"})]}),(0,t.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:"authMethod",value:"oauth",checked:"oauth"===d,onChange:()=>u("oauth"),className:"mr-2 accent-primary"}),(0,t.jsx)("span",{className:"text-sm",children:"OAuth Token"})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-pretty",children:"Select OAuth if your token was obtained via OAuth flow"})]}),(0,t.jsx)(n.Button,{type:"submit",disabled:v||!c.trim(),className:"w-full h-11 text-base font-medium",size:"lg","aria-label":v?"Verifying credentials":"Continue with API token",children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{className:"mr-2 h-4 w-4 animate-spin","aria-hidden":"true"}),(0,t.jsx)("span",{children:"Verifying..."})]}):(0,t.jsx)("span",{children:"Continue"})})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(n.Button,{onClick:()=>{j(!0),p("");try{let t=i.trim().replace(/^https?:\/\//,"").replace(/\/$/,"");t.includes("-be.glean.com")||"app.glean.com"===t||t.startsWith("app.")||t.endsWith(".glean.com")&&t.replace(".glean.com","");let s=t.includes("-be.")?t.replace("-be.glean.com",".glean.com"):t,a="".concat(window.location.origin,"/auth/callback"),n="https://".concat(s,"/oauth/authorize?")+"redirect_uri=".concat(encodeURIComponent(a),"&")+"scope=".concat(encodeURIComponent("collections:read drafts:read users:read groups:read integrations:read"),"&")+"response_type=code";sessionStorage.setItem("oauth_domain",t),console.log("Opening OAuth flow in popup:",n);let r=window.open(n,"glean-oauth","width=600,height=700,scrollbars=yes,resizable=yes");if(!r){p("Popup blocked. Please allow popups for this site and try again."),j(!1);return}let l=!1,c=async s=>{if(s.origin!==window.location.origin)return void console.warn("Ignored message from unauthorized origin:",s.origin);if("GLEAN_OAUTH_SUCCESS"===s.data.type){l=!0,window.removeEventListener("message",c),null==r||r.close();let{token:a,domain:n}=s.data;e({domain:n||t,apiToken:a,authMethod:"oauth"}),j(!1)}else"GLEAN_OAUTH_ERROR"===s.data.type&&(l=!0,window.removeEventListener("message",c),null==r||r.close(),p(s.data.error||"OAuth authentication failed"),j(!1))};window.addEventListener("message",c);let o=setInterval(()=>{(null==r?void 0:r.closed)&&!l&&(clearInterval(o),window.removeEventListener("message",c),p("OAuth flow was cancelled"),j(!1))},1e3)}catch(e){p(e instanceof Error?e.message:"Failed to initiate OAuth flow"),j(!1)}},disabled:v||k,className:"w-full h-11 text-base font-medium",size:"lg","aria-label":k?"Checking extension":v?"Connecting":w?"Sign in with Extension OAuth":"Continue with OAuth",children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{className:"mr-2 h-4 w-4 animate-spin","aria-hidden":"true"}),(0,t.jsx)("span",{children:"Checking extension..."})]}):v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{className:"mr-2 h-4 w-4 animate-spin","aria-hidden":"true"}),(0,t.jsx)("span",{children:"Connecting..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"mr-2 h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),(0,t.jsx)("span",{children:w?"Sign in with Extension OAuth":"Continue with OAuth"})]})}),w&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Using OAuth token from Glean Web Clipper extension"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-border"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,t.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"Or"})})]}),(0,t.jsx)(n.Button,{variant:"outline",onClick:()=>b(!0),className:"w-full h-11 text-base font-medium border-border/50",size:"lg",children:"Sign in with API token"})]}),x&&(0,t.jsx)("div",{className:"mt-4 p-3 rounded-lg bg-destructive/10 border border-destructive/20",role:"alert","aria-live":"assertive",children:(0,t.jsx)("p",{className:"text-sm text-destructive text-pretty",children:x})})]}),(0,t.jsxs)("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:[(0,t.jsxs)("p",{className:"text-pretty",children:["Don't have an account?"," ",(0,t.jsx)("a",{href:"#",className:"text-foreground hover:underline font-medium",children:"Contact your administrator"})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-4",children:[(0,t.jsx)("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Privacy"}),(0,t.jsx)("span",{className:"text-border",children:"Â·"}),(0,t.jsx)("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Terms"}),(0,t.jsx)("span",{className:"text-border",children:"Â·"}),(0,t.jsx)("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Help"})]})]})]})]})}},76828,e=>{"use strict";e.s(["Search",()=>t],76828);let t=(0,e.i(88935).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},73623,e=>{"use strict";e.s(["Trash2",()=>t],73623);let t=(0,e.i(88935).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},71253,e=>{"use strict";e.s(["ExternalLink",()=>t],71253);let t=(0,e.i(88935).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},85248,e=>{"use strict";async function t(){try{try{let e=localStorage.getItem("glean_clips");if(!e)return s();let t=JSON.parse(e);if(0===t.length)return s();return t.map(e=>{var t;return{id:e.id||Date.now()+Math.random(),type:e.type||(e.selectedText?"text":"image"),url:e.url||"",title:e.title||"Untitled Clip",date:(t=e.timestamp||e.date||Date.now(),new Date(t).toISOString().split("T")[0]),source:e.domain||e.source||"",selectedText:e.selectedText,domain:e.domain,timestamp:e.timestamp||new Date(e.date||Date.now()).getTime(),syncStatus:e.syncStatus||(e.synced?"synced":"pending"),collectionId:e.collectionId||e.gleanCollectionId,collectionName:e.collectionName}})}catch(e){return console.error("Failed to parse clips from localStorage:",e),s()}}catch(e){return console.error("Failed to fetch clips:",e),[]}}function s(){return[{id:"mock-1",type:"text",url:"https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering",title:"Prompt Engineering Guide - Anthropic",date:"2024-12-10",source:"docs.anthropic.com",selectedText:"Claude performs best with clear, specific instructions. Break complex tasks into steps and provide examples of desired output format.",domain:"docs.anthropic.com",timestamp:Date.now()-864e5,syncStatus:"synced",collectionName:"AI Resources"},{id:"mock-2",type:"text",url:"https://react.dev/learn/thinking-in-react",title:"Thinking in React",date:"2024-12-09",source:"react.dev",selectedText:"React changes how you think about designs and apps. When you build a UI with React, you first break it apart into pieces called components.",domain:"react.dev",timestamp:Date.now()-1728e5,syncStatus:"synced",collectionName:"Dev Docs"},{id:"mock-3",type:"text",url:"https://www.glean.com/blog/enterprise-search",title:"The Future of Enterprise Search",date:"2024-12-08",source:"glean.com",selectedText:"Enterprise search has evolved beyond keyword matching. Modern solutions use AI to understand context, user intent, and organizational knowledge graphs.",domain:"glean.com",timestamp:Date.now()-2592e5,syncStatus:"pending",collectionName:void 0},{id:"mock-4",type:"text",url:"https://tailwindcss.com/docs/customizing-colors",title:"Customizing Colors - Tailwind CSS",date:"2024-12-07",source:"tailwindcss.com",selectedText:"Tailwind includes an expertly-crafted default color palette out-of-the-box that is a great starting point.",domain:"tailwindcss.com",timestamp:Date.now()-3456e5,syncStatus:"synced",collectionName:"CSS"},{id:"mock-5",type:"text",url:"https://developer.chrome.com/docs/extensions",title:"Chrome Extensions Documentation",date:"2024-12-06",source:"developer.chrome.com",selectedText:"Extensions are small software programs that customize the browsing experience. They let users tailor Chrome functionality to individual needs.",domain:"developer.chrome.com",timestamp:Date.now()-432e6,syncStatus:"synced",collectionName:"Extension Dev"}]}async function a(e){try{var t=e;try{let e=localStorage.getItem("glean_clips");if(!e)return!1;let s=JSON.parse(e).filter(e=>String(e.id)!==String(t));return localStorage.setItem("glean_clips",JSON.stringify(s)),!0}catch(e){return console.error("Failed to delete clip from localStorage:",e),!1}}catch(e){return console.error("Failed to delete clip:",e),!1}}function n(e){if(e.url)window.open(e.url,"_blank");else if(e.selectedText){let t=new Blob([e.selectedText],{type:"text/plain"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="".concat(e.title||"clip",".txt"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}}e.s(["deleteClip",()=>a,"downloadClip",()=>n,"fetchClips",()=>t])},39730,3269,e=>{"use strict";e.s(["Grid3x3",()=>s],39730);var t=e.i(88935);let s=(0,t.default)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);e.s(["List",()=>a],3269);let a=(0,t.default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]])},52807,e=>{"use strict";e.s(["default",()=>f],52807);var t=e.i(35197),s=e.i(32192),a=e.i(1237),n=e.i(76828),i=e.i(39730),r=e.i(3269),l=e.i(88935);let c=(0,l.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),o=(0,l.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var d=e.i(73623),m=e.i(71253),h=e.i(58213),u=e.i(83959),x=e.i(83782),p=e.i(85248);function g(){let[e,s]=(0,h.useState)("grid"),[a,l]=(0,h.useState)([]),[g,f]=(0,h.useState)([]),[v,j]=(0,h.useState)([]),[y,b]=(0,h.useState)(""),[w,N]=(0,h.useState)(!0);async function k(){N(!0);try{let e=await (0,p.fetchClips)();f(e),j(e)}catch(e){console.error("Failed to load clips:",e),f([]),j([])}finally{N(!1)}}(0,h.useEffect)(()=>{k()},[]),(0,h.useEffect)(()=>{if(!y.trim())return void j(g);let e=y.toLowerCase();j(g.filter(t=>[t.title,t.selectedText,t.domain,t.source,t.collectionName].filter(Boolean).join(" ").toLowerCase().includes(e)))},[y,g]);let z=e=>{l(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},C=async e=>{confirm("Are you sure you want to delete this clip?")&&(await (0,p.deleteClip)(e)?(await k(),l(t=>t.filter(t=>t!==e))):alert("Failed to delete clip"))},S=async()=>{if(0===a.length||!confirm("Are you sure you want to delete ".concat(a.length," clip(s)?")))return;let e=a.map(e=>(0,p.deleteClip)(e));await Promise.all(e),await k(),l([])};return(0,t.jsxs)("div",{className:"min-h-screen bg-zinc-950 text-zinc-100",children:[(0,t.jsx)("header",{className:"border-b border-zinc-800 bg-zinc-900/50 backdrop-blur-sm sticky top-0 z-10",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-zinc-100",children:"Saved Clips"}),(0,t.jsx)("p",{className:"text-sm text-zinc-400 mt-0.5",children:w?"Loading...":"".concat(g.length," item").concat(1!==g.length?"s":""," saved")})]}),(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-500"}),(0,t.jsx)(x.Input,{type:"search",placeholder:"Search clips...",value:y,onChange:e=>b(e.target.value),className:"pl-9 bg-zinc-800 border-zinc-700 text-zinc-100 placeholder:text-zinc-500 h-9"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Button,{variant:"ghost",size:"icon",onClick:()=>s("grid"),className:"h-9 w-9 ".concat("grid"===e?"bg-zinc-800 text-zinc-100":"text-zinc-400 hover:text-zinc-100"),children:(0,t.jsx)(i.Grid3x3,{className:"h-4 w-4"})}),(0,t.jsx)(u.Button,{variant:"ghost",size:"icon",onClick:()=>s("list"),className:"h-9 w-9 ".concat("list"===e?"bg-zinc-800 text-zinc-100":"text-zinc-400 hover:text-zinc-100"),children:(0,t.jsx)(r.List,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:"w-px h-6 bg-zinc-700 mx-1"}),(0,t.jsx)(u.Button,{variant:"ghost",size:"icon",className:"h-9 w-9 text-zinc-400 hover:text-zinc-100",children:(0,t.jsx)(c,{className:"h-4 w-4"})})]})]}),a.length>0&&(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-2 p-2 bg-zinc-800 rounded-lg",children:[(0,t.jsxs)("span",{className:"text-sm text-zinc-300 flex-1",children:[a.length," ",1===a.length?"clip":"clips"," selected"]}),(0,t.jsxs)(u.Button,{variant:"ghost",size:"sm",className:"h-8 text-zinc-300 hover:text-zinc-100",onClick:()=>{a.forEach(e=>{let t=g.find(t=>t.id===e);t&&(0,p.downloadClip)(t)})},children:[(0,t.jsx)(o,{className:"h-4 w-4 mr-1.5"}),"Download"]}),(0,t.jsxs)(u.Button,{variant:"ghost",size:"sm",className:"h-8 text-zinc-300 hover:text-red-400",onClick:S,children:[(0,t.jsx)(d.Trash2,{className:"h-4 w-4 mr-1.5"}),"Delete"]})]})]})}),(0,t.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:w?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"text-zinc-400",children:"Loading clips..."})}):0===v.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"ðŸ“„"}),(0,t.jsx)("div",{className:"text-zinc-300 text-lg mb-2",children:y?"No matching clips":"No clips yet"}),(0,t.jsx)("div",{className:"text-zinc-500 text-sm",children:y?"Try adjusting your search query":"Select text on any webpage and click the clip button in the extension"})]}):"grid"===e?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(e=>(0,t.jsxs)("div",{className:"group relative bg-zinc-900 rounded-lg overflow-hidden border transition-all ".concat(a.includes(e.id)?"border-zinc-500 ring-2 ring-zinc-500":"border-zinc-800 hover:border-zinc-700"),children:[(0,t.jsxs)("div",{className:"aspect-video relative overflow-hidden bg-zinc-800",children:["text"===e.type||e.selectedText?(0,t.jsx)("div",{className:"p-3 h-full overflow-y-auto",children:(0,t.jsx)("p",{className:"text-xs text-zinc-300 line-clamp-6",children:e.selectedText})}):e.url?(0,t.jsx)("img",{src:e.url,alt:e.title,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-zinc-500 text-sm",children:"No preview"}),(0,t.jsxs)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.url&&(0,t.jsx)(u.Button,{size:"icon",variant:"secondary",className:"h-8 w-8 bg-zinc-800 hover:bg-zinc-700",onClick:()=>window.open(e.url,"_blank"),children:(0,t.jsx)(m.ExternalLink,{className:"h-4 w-4"})}),(0,t.jsx)(u.Button,{size:"icon",variant:"secondary",className:"h-8 w-8 bg-zinc-800 hover:bg-zinc-700",onClick:()=>(0,p.downloadClip)(e),children:(0,t.jsx)(o,{className:"h-4 w-4"})}),(0,t.jsx)(u.Button,{size:"icon",variant:"secondary",className:"h-8 w-8 bg-zinc-800 hover:bg-red-900",onClick:()=>C(e.id),children:(0,t.jsx)(d.Trash2,{className:"h-4 w-4"})})]})]}),(0,t.jsx)("div",{className:"absolute top-2 left-2 z-10",children:(0,t.jsx)("input",{type:"checkbox",checked:a.includes(e.id),onChange:()=>z(e.id),className:"h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-zinc-100 focus:ring-zinc-500 cursor-pointer"})}),(0,t.jsxs)("div",{className:"p-3",children:[(0,t.jsx)("h3",{className:"font-medium text-sm text-zinc-100 truncate mb-1",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-zinc-500",children:[(0,t.jsx)("span",{children:e.date}),e.source&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsx)("span",{className:"truncate",children:e.source})]}),"synced"===e.syncStatus&&e.collectionName&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsxs)("span",{className:"text-green-500",children:["âœ“ ",e.collectionName]})]})]})]})]},e.id))}):(0,t.jsx)("div",{className:"space-y-2",children:v.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-zinc-900 rounded-lg border transition-all ".concat(a.includes(e.id)?"border-zinc-500":"border-zinc-800 hover:border-zinc-700"),children:[(0,t.jsx)("input",{type:"checkbox",checked:a.includes(e.id),onChange:()=>z(e.id),className:"h-4 w-4 rounded border-zinc-600 bg-zinc-800 text-zinc-100 focus:ring-zinc-500 cursor-pointer"}),(0,t.jsx)("div",{className:"w-24 h-16 rounded overflow-hidden bg-zinc-800 flex-shrink-0",children:"text"===e.type||e.selectedText?(0,t.jsx)("div",{className:"p-2 h-full overflow-hidden",children:(0,t.jsx)("p",{className:"text-xs text-zinc-300 line-clamp-4",children:e.selectedText})}):e.url?(0,t.jsx)("img",{src:e.url,alt:e.title,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-zinc-500 text-xs",children:"No preview"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-medium text-sm text-zinc-100 truncate mb-1",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-zinc-500",children:[(0,t.jsx)("span",{children:e.date}),e.source&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsx)("span",{className:"truncate",children:e.source})]}),"synced"===e.syncStatus&&e.collectionName&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsxs)("span",{className:"text-green-500",children:["âœ“ ",e.collectionName]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[e.url&&(0,t.jsx)(u.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 text-zinc-400 hover:text-zinc-100",onClick:()=>window.open(e.url,"_blank"),children:(0,t.jsx)(m.ExternalLink,{className:"h-4 w-4"})}),(0,t.jsx)(u.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 text-zinc-400 hover:text-zinc-100",onClick:()=>(0,p.downloadClip)(e),children:(0,t.jsx)(o,{className:"h-4 w-4"})}),(0,t.jsx)(u.Button,{size:"icon",variant:"ghost",className:"h-8 w-8 text-zinc-400 hover:text-red-400",onClick:()=>C(e.id),children:(0,t.jsx)(d.Trash2,{className:"h-4 w-4"})})]})]},e.id))})})]})}function f(){let{isAuth:e,isLoading:n}=(0,s.useAuth)();return n?(0,t.jsx)("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 border-2 border-zinc-700 border-t-blue-500 rounded-full animate-spin"})}):e?(0,t.jsx)(g,{}):(0,t.jsx)(a.default,{})}}]);